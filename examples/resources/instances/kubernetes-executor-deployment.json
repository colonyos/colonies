{
  "apiVersion": "compute.colonies.io/v1",
  "kind": "ExecutorDeployment",
  "metadata": {
    "name": "ml-training-executors",
    "namespace": "ml-colony",
    "labels": {
      "app": "ml-training",
      "environment": "production",
      "team": "data-science"
    },
    "annotations": {
      "description": "GPU-enabled ML training executors for production workloads",
      "contact": "ml-team@example.com"
    }
  },
  "spec": {
    "runtime": "kubernetes",
    "replicas": 5,
    "template": {
      "type": "gpu-executor",
      "name": "ml-training-gpu",
      "capabilities": {
        "hardware": {
          "cpu": "16",
          "memory": "64Gi",
          "gpu": {
            "name": "nvidia-a100",
            "memory": "40Gi",
            "count": 2
          }
        },
        "software": {
          "name": "pytorch",
          "type": "ml-framework",
          "version": "2.0"
        }
      }
    },
    "config": {
      "namespace": "ml-executors",
      "image": "colonyos/ml-executor:latest",
      "imagePullPolicy": "Always",
      "resources": {
        "requests": {
          "cpu": "8",
          "memory": "32Gi",
          "gpu": "1"
        },
        "limits": {
          "cpu": "16",
          "memory": "64Gi",
          "gpu": "2"
        }
      },
      "nodeSelector": {
        "accelerator": "nvidia-a100",
        "zone": "us-west1-a"
      },
      "tolerations": [
        {
          "key": "gpu",
          "operator": "Equal",
          "value": "true",
          "effect": "NoSchedule"
        }
      ],
      "env": [
        {
          "name": "COLONIES_SERVER_URL",
          "value": "https://colonies.example.com"
        },
        {
          "name": "COLONIES_COLONY_NAME",
          "value": "ml-colony"
        },
        {
          "name": "MODEL_CACHE_DIR",
          "value": "/models"
        }
      ],
      "volumes": [
        {
          "name": "model-cache",
          "source": {
            "persistentVolumeClaim": {
              "claimName": "ml-models-pvc"
            }
          }
        }
      ],
      "volumeMounts": [
        {
          "name": "model-cache",
          "mountPath": "/models"
        }
      ]
    }
  },
  "status": {
    "phase": "Running",
    "ready": 5,
    "available": 5,
    "unavailable": 0,
    "deployedExecutors": [
      "exec-ml-001",
      "exec-ml-002",
      "exec-ml-003",
      "exec-ml-004",
      "exec-ml-005"
    ],
    "lastUpdateTime": "2025-10-20T10:30:00Z",
    "conditions": [
      {
        "type": "Ready",
        "status": "True",
        "lastTransitionTime": "2025-10-20T10:15:00Z",
        "reason": "AllReplicasReady",
        "message": "All 5 replicas are running and ready"
      }
    ]
  }
}
