{
  "apiVersion": "compute.colonies.io/v1",
  "kind": "ExecutorDeployment",
  "metadata": {
    "name": "edge-iot-executors",
    "namespace": "iot-colony",
    "labels": {
      "app": "iot-processing",
      "location": "edge",
      "environment": "production"
    },
    "annotations": {
      "description": "Edge computing executors for IoT data processing"
    }
  },
  "spec": {
    "runtime": "docker",
    "replicas": 10,
    "template": {
      "type": "edge-executor",
      "name": "iot-processor",
      "location": {
        "lat": 59.3293,
        "long": 18.0686,
        "desc": "Stockholm edge datacenter"
      },
      "capabilities": {
        "hardware": {
          "cpu": "4",
          "memory": "8Gi"
        }
      }
    },
    "config": {
      "image": "colonyos/edge-executor:arm64",
      "network": "colonies-iot-net",
      "ports": [
        {
          "hostPort": 8080,
          "containerPort": 8080,
          "protocol": "tcp"
        }
      ],
      "volumes": [
        {
          "source": "/data/iot",
          "target": "/app/data",
          "readOnly": false
        }
      ],
      "env": [
        {
          "name": "COLONIES_COLONY_NAME",
          "value": "iot-colony"
        },
        {
          "name": "DATA_DIR",
          "value": "/app/data"
        }
      ],
      "resources": {
        "cpus": "2",
        "memory": "4G"
      },
      "restartPolicy": "unless-stopped",
      "labels": {
        "colony": "iot-colony",
        "type": "edge-executor"
      }
    }
  },
  "status": {
    "phase": "Running",
    "ready": 10,
    "available": 10
  }
}
